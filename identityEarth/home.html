<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>HOME</title>
    <link rel="stylesheet" type="text/css" href="identityEarth-style.css">
    <link rel="stylesheet" href="https://use.typekit.net/dbh8opd.css">
    <script src="https://d3js.org/d3.v4.min.js"></script>
  </head>
  <body id="Body">
    <h1>Planet Size Comparison</h1>
    <svg id="space" width="100%" height="50%">
      <g id="xAxis"></g>
    </svg>
    <select id="planetSelect" onchange="redraw()">
      <option value="Mercury">Mercury
      <option value="Venus">Venus
      <option value="Mars">Mars
      <option value="Jupiter">Jupiter
      <option value="Saturn">Saturn
      <option value="Uranus">Uranus
      <option value="Neptune">Neptune
    </select>
    <select id="dataPointSelect" onchange="redraw()">
      <option value="radius">Radius
      <option value="gravity">Gravity
      <option value="dayLength">Average Day Length
      <option value="moons">Number of Moons
    </select>
  </body>
  <script>

    var planetData;
    var myData = [24, 50];
    var newData = [33, 4];

    d3.queue()
      .defer(d3.csv, "identityEarth.csv")
      .awaitAll(function(error, dataArray) {
        planetData = dataArray[0];
        planetData.forEach(function(planet) {
          planet.radius = parseFloat(planet.radius);
          planet.gravity = parseFloat(planet.gravity);
          planet.dayLength = parseFloat(planet.dayLength);
          planet.surfaceTempLow = parseFloat(planet.surfaceTempLow);
          planet.surfaceTempHigh = parseFloat(planet.surfaceTempHigh);
          planet.moons = parseFloat(planet.moons);
        });
        console.log(planetData);
        redraw();
        drawRadius(myData);
      });

// I've got these function filtering the array down to two planet objects
// but I can't figure out how to write a function that filters it by a second
// parameter: I can get all info on Earth and Mercury, but not the radius of either
// one or both in a form that I can place in my draw function

    function otherPlanet() {
      var x = document.getElementById("planetSelect").value;
        return x;
      };

    function otherDataPoint() {
      var x = document.getElementById("dataPointSelect").value;
        return "[0]." + x;
      };

      function getActiveData() {
        var x = otherDataPoint()
        var activeData = [0].radius;
          return activeData;
      }

      function redraw() {
        var data = planetData.filter(function(d) {
          return d.name == "Earth" || d.name == otherPlanet();
        });
        console.log(data);
        console.log([0].radius);
      };

// draw function needs to be stylized

    var drawRadius = function(dataArray) {
      var svg = d3.select("#space")
      var planets = svg.selectAll(".planet")
        .data(dataArray);
      planets.enter().append("circle")
        .attr("class", "planet")
        .attr("r", 0)
        .attr("fill", "black")
        .attr("cx", function(dataPoint, index) {
          return 200 + (index * 100);
        })
        .attr("cy", 25)
        .transition()
        .duration(1000)
        .attr("r", function(dataPoint) {
          return dataPoint / 2;
        });
      // update circles
      planets
        .transition()
        .duration(1000)
        .attr("r", function(dataPoint) {
          return dataPoint / 2;
        })
        .attr("fill", "green");
      // exit circles
      planets.exit()
        .transition()
        .duration(1000)
        .attr("r", 0)
        .remove();
    };


    </script>
</html>
